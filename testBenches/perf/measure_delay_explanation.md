# Delay íŒŒë¼ë¯¸í„° ì„¤ëª…

## Delayì˜ ì—­í• 

`--delay` íŒŒë¼ë¯¸í„°ëŠ” **ê° íŒ¨í„´(Pattern) ì‹¤í–‰ ì „ì— GPUì—ì„œ ì‹¤í–‰ë˜ëŠ” delay kernelì˜ ì§€ì† ì‹œê°„**ì„ ë§ˆì´í¬ë¡œì´ˆ(Î¼s) ë‹¨ìœ„ë¡œ ì§€ì •í•©ë‹ˆë‹¤.

### ì½”ë“œì—ì„œì˜ ì‚¬ìš©

```62:66:measure/cli.py
    base.add_argument(
        "--delay",
        type=int,
        dest="delay",
        default=1000,
        help="Specifies the duration of the delay kernel",
    )
```

```2973:2975:cubb_gpu_test_bench/cubb_gpu_test_bench.cpp
                // Launch delay kernel on main stream
                gpu_us_delay(delayUs, gpuId, mainStream.handle(), 0);
            }
```

Delay kernelì€ GPUì˜ global timerë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì •ëœ ì‹œê°„ ë™ì•ˆ busy-waitë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ëŠ” ê° íŒ¨í„´ ì‹¤í–‰ ì‚¬ì´ì— ì¼ì •í•œ ê°„ê²©ì„ ë‘ì–´ GPU ìƒíƒœë¥¼ ì•ˆì •í™”í•˜ê±°ë‚˜, ì¸¡ì • ì¡°ê±´ì„ ì¼ê´€ë˜ê²Œ ìœ ì§€í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

## Delay = 0 vs Delay = 100000 ë¹„êµ

### Delay = 0 (ëŒ€ê¸° ì—†ìŒ)

```
ì‹œê°„ì¶• â†’
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern 1 ì‹¤í–‰                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern 2 ì‹¤í–‰ (ì¦‰ì‹œ ì‹œì‘)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern 3 ì‹¤í–‰ (ì¦‰ì‹œ ì‹œì‘)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘
   ì—°ì† ì‹¤í–‰, ëŒ€ê¸° ì—†ìŒ
```

**íŠ¹ì§•:**
- ê° íŒ¨í„´ì´ ì—°ì†ì ìœ¼ë¡œ ì‹¤í–‰ë¨
- íŒ¨í„´ ê°„ ëŒ€ê¸° ì‹œê°„ ì—†ìŒ
- GPU ë¦¬ì†ŒìŠ¤ê°€ ìµœëŒ€í•œ í™œìš©ë¨
- ì¸¡ì • ì‹œ GPU ìƒíƒœ ë³€í™”ê°€ ë¹ ë¥¼ ìˆ˜ ìˆìŒ

### Delay = 100000 (100ms ëŒ€ê¸°)

```
ì‹œê°„ì¶• â†’
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern 1 ì‹¤í–‰                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Delay Kernel ì‹¤í–‰ (100ms = 100,000Î¼s)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern 2 ì‹¤í–‰                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Delay Kernel ì‹¤í–‰ (100ms)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern 3 ì‹¤í–‰                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘
   ê° íŒ¨í„´ ì „ì— 100ms ëŒ€ê¸°
```

**íŠ¹ì§•:**
- ê° íŒ¨í„´ ì‹¤í–‰ ì „ì— 100ms(100,000 ë§ˆì´í¬ë¡œì´ˆ) ëŒ€ê¸°
- íŒ¨í„´ ê°„ ì¼ì •í•œ ê°„ê²© ìœ ì§€
- GPU ìƒíƒœê°€ ê° íŒ¨í„´ ì‹œì‘ ì „ì— ì•ˆì •í™”ë¨
- ì¸¡ì • ì¡°ê±´ì´ ë” ì¼ê´€ì ì¼ ìˆ˜ ìˆìŒ
- ì „ì²´ ì‹¤í–‰ ì‹œê°„ì´ ê¸¸ì–´ì§

## ìƒì„¸ íƒ€ì„ë¼ì¸ ë¹„êµ

### Delay = 0 ì‹œë‚˜ë¦¬ì˜¤

```
ì‹œê°„ (Î¼s) â†’
0    500   1000  1500  2000  2500  3000
â”‚    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ P1 â”‚ P2 â”‚ P3  â”‚ P1  â”‚ P2  â”‚ P3  â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
     â†‘
   ì—°ì† ì‹¤í–‰, íŒ¨í„´ ê°„ ëŒ€ê¸° ì—†ìŒ

ê° Iteration:
  [Pattern 1: ~500Î¼s] â†’ [Pattern 2: ~500Î¼s] â†’ [Pattern 3: ~500Î¼s]
  ì´ ì‹œê°„: ~1500Î¼s per iteration
```

### Delay = 100000 ì‹œë‚˜ë¦¬ì˜¤

```
ì‹œê°„ (Î¼s) â†’
0       500     100500   101000   201500   202000
â”‚       â”‚       â”‚        â”‚        â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  P1   â”‚ Delay â”‚  P2    â”‚ Delay  â”‚  P3    â”‚
â”‚ 500Î¼s â”‚100ms  â”‚ 500Î¼s  â”‚ 100ms  â”‚ 500Î¼s  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘              â†‘
     100ms ëŒ€ê¸°      100ms ëŒ€ê¸°

ê° Iteration:
  [Pattern 1: ~500Î¼s] â†’ [Delay: 100,000Î¼s] â†’ [Pattern 2: ~500Î¼s] â†’ [Delay: 100,000Î¼s] â†’ [Pattern 3: ~500Î¼s]
  ì´ ì‹œê°„: ~201,500Î¼s (ì•½ 201.5ms) per iteration
```

## ì‹œê°ì  ë¹„êµ ë‹¤ì´ì–´ê·¸ë¨

### ì „ì²´ ì‹¤í–‰ íë¦„ ë¹„êµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DELAY = 0 (ëŒ€ê¸° ì—†ìŒ)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Iteration 1:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚Pattern1â”‚â”‚Pattern2â”‚â”‚Pattern3â”‚  â†’ ì—°ì† ì‹¤í–‰                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                         â”‚
â”‚  Iteration 2:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚Pattern1â”‚â”‚Pattern2â”‚â”‚Pattern3â”‚  â†’ ì—°ì† ì‹¤í–‰                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                         â”‚
â”‚  â±ï¸  ì´ ì‹¤í–‰ ì‹œê°„: ë¹ ë¦„ (íŒ¨í„´ ì‹¤í–‰ ì‹œê°„ë§Œ)                               â”‚
â”‚  ğŸ“Š GPU í™œìš©ë¥ : ë†’ìŒ                                                    â”‚
â”‚  ğŸ”„ íŒ¨í„´ ê°„ ìƒíƒœ: ì—°ì†ì  (ë³€í™” ê°€ëŠ¥)                                     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DELAY = 100000 (100ms ëŒ€ê¸°)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Iteration 1:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚Pattern1â”‚â”‚   Delay Kernel   â”‚â”‚Pattern2â”‚â”‚   Delay Kernel   â”‚â”‚Pattern3â”‚â”‚
â”‚  â”‚ ~500Î¼s â”‚â”‚   100,000Î¼s      â”‚â”‚ ~500Î¼s â”‚â”‚   100,000Î¼s      â”‚â”‚ ~500Î¼s â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                         â”‚
â”‚  Iteration 2:                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚Pattern1â”‚â”‚   Delay Kernel   â”‚â”‚Pattern2â”‚â”‚   Delay Kernel   â”‚â”‚Pattern3â”‚â”‚
â”‚  â”‚ ~500Î¼s â”‚â”‚   100,000Î¼s      â”‚â”‚ ~500Î¼s â”‚â”‚   100,000Î¼s      â”‚â”‚ ~500Î¼s â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                         â”‚
â”‚  â±ï¸  ì´ ì‹¤í–‰ ì‹œê°„: ëŠë¦¼ (ê° íŒ¨í„´ ì „ 100ms ëŒ€ê¸°)                           â”‚
â”‚  ğŸ“Š GPU í™œìš©ë¥ : ë‚®ìŒ (ëŒ€ê¸° ì‹œê°„ í¬í•¨)                                    â”‚
â”‚  ğŸ”„ íŒ¨í„´ ê°„ ìƒíƒœ: ë…ë¦½ì  (ê° íŒ¨í„´ ì‹œì‘ ì „ ì•ˆì •í™”)                         â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### GPU ë¦¬ì†ŒìŠ¤ ì‚¬ìš© íŒ¨í„´

```
DELAY = 0:
GPU ì‚¬ìš©ë¥ 
100% â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
     â”‚                                                                  â”‚
  0% â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     P1  P2  P3  P1  P2  P3  P1  P2  P3  ...
     â†‘
   ì—°ì† ì‹¤í–‰, GPUê°€ ê³„ì† ì‚¬ìš©ë¨

DELAY = 100000:
GPU ì‚¬ìš©ë¥ 
100% â”‚â–ˆâ–ˆâ–ˆâ”‚    â”‚â–ˆâ–ˆâ–ˆâ”‚    â”‚â–ˆâ–ˆâ–ˆâ”‚    â”‚â–ˆâ–ˆâ–ˆâ”‚    â”‚â–ˆâ–ˆâ–ˆâ”‚    â”‚â–ˆâ–ˆâ–ˆâ”‚    â”‚â–ˆâ–ˆâ–ˆâ”‚    â”‚
     â”‚P1 â”‚Waitâ”‚P2 â”‚Waitâ”‚P3 â”‚Waitâ”‚P1 â”‚Waitâ”‚P2 â”‚Waitâ”‚P3 â”‚Waitâ”‚P1 â”‚Waitâ”‚
  0% â””â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”˜
     â†‘   â†‘
   ì‹¤í–‰ ëŒ€ê¸° (100ms)
```

## ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### Delay = 0ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
- **ë¹ ë¥¸ ì„±ëŠ¥ ì¸¡ì •**: ìµœëŒ€ ì²˜ë¦¬ëŸ‰ ì¸¡ì •
- **ë¦¬ì†ŒìŠ¤ í™œìš© ìµœëŒ€í™”**: GPUë¥¼ ìµœëŒ€í•œ í™œìš©
- **ì‹¤ì‹œê°„ ì‹œë®¬ë ˆì´ì…˜**: ì‹¤ì œ ìš´ì˜ í™˜ê²½ê³¼ ìœ ì‚¬í•œ ì—°ì† ì‹¤í–‰

### Delay = 100000ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°
- **ì•ˆì •ì ì¸ ì¸¡ì •**: ê° íŒ¨í„´ì´ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ë³´ì¥
- **GPU ìƒíƒœ ì´ˆê¸°í™”**: íŒ¨í„´ ê°„ GPU ìƒíƒœë¥¼ ë¦¬ì…‹í•˜ì—¬ ì¼ê´€ëœ ì¸¡ì •
- **ì „ë ¥ ì¸¡ì •**: íŒ¨í„´ ê°„ ê°„ê²©ì„ ë‘ì–´ ì „ë ¥ ì†Œë¹„ ì¸¡ì •ì˜ ì •í™•ë„ í–¥ìƒ
- **ë””ë²„ê¹…**: ê° íŒ¨í„´ì˜ ì‹œì‘ê³¼ ëì„ ëª…í™•íˆ êµ¬ë¶„

## ì‹¤ì œ ì½”ë“œ íë¦„

```python
# measure.pyì—ì„œ delay íŒŒë¼ë¯¸í„° ì „ë‹¬
# â†’ measure/TDD/configure.pyì—ì„œ -w {args.delay}ë¡œ ì „ë‹¬
# â†’ cubb_gpu_test_benchì—ì„œ gpu_us_delay() í˜¸ì¶œ
# â†’ util.cuì˜ delay_kernel_us() ì‹¤í–‰
```

```63:75:cuPHY/examples/common/util.cu
__global__ void delay_kernel_us(uint32_t delay_us)
{
    // 64-bit global nanosecond timer
    constexpr uint64_t NS_PER_US = 1000UL;

    uint64_t start_time = __globaltimer();
    uint64_t end_time   = start_time + (delay_us * NS_PER_US);

    // 64-bit timer has a long range so skipping wrap around check
    while(__globaltimer() < end_time)
    {
    };
}
```

Delay kernelì€ GPUì˜ global timerë¥¼ ì‚¬ìš©í•˜ì—¬ ì •í™•í•œ ì‹œê°„ ë™ì•ˆ busy-waitë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

